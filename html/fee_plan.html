<!DOCTYPE html>

<html lang="en" class="light-style layout-menu-fixed layout-compact" dir="ltr" data-theme="theme-default"
      data-assets-path="../assets/" data-template="Dashboard">

<head>
  <meta charset="utf-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />

  <title>Dashboard - School Management ERP | School ERP - Dashboard</title>

  <meta name="description" content="" />

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="../assets/img/favicon/favicon.ico" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
    rel="stylesheet" />

  <link rel="stylesheet" href="../assets/vendor/fonts/boxicons.css" />

  <!-- Core CSS -->
  <link rel="stylesheet" href="../assets/vendor/css/core.css" class="template-customizer-core-css" />
  <link rel="stylesheet" href="../assets/vendor/css/theme-default.css" class="template-customizer-theme-css" />
  <link rel="stylesheet" href="../assets/css/demo.css" />

  <!-- Vendors CSS -->
  <link rel="stylesheet" href="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css" />
  <link rel="stylesheet" href="../assets/vendor/libs/apex-charts/apex-charts.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />

  <!-- Page CSS -->

  <!-- Helpers -->
  <script src="../assets/vendor/js/helpers.js"></script>
  <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
  <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
  <script src="../assets/js/config.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

  <!-- DataTables CSS -->
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.1/css/dataTables.bootstrap4.min.css" />

  <!-- SweetAlert2 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.2/dist/sweetalert2.min.css" rel="stylesheet" />
</head>

<body class="layout-navbar-fixed">
<!-- Layout wrapper -->
<div class="layout-wrapper layout-content-navbar">
  <div class="layout-container">

    <!-- Menu -->
    <div id="menu"></div>
    <!-- / Menu -->

    <!-- Layout container -->
    <div class="layout-page">
      <!-- Navbar -->

      <nav class="layout-navbar container-xxl navbar navbar-expand-xl navbar-detached align-items-center"
           id="layout-navbar">
        <div class="layout-menu-toggle navbar-nav align-items-xl-center me-3 me-xl-0 d-xl-none">
          <a class="nav-item nav-link px-0 me-xl-4" href="javascript:void(0)">
            <i class="bx bx-menu bx-sm"></i>
          </a>
        </div>

        <div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">
          <!-- Search -->
          <div class="navbar-nav align-items-center">
            <div class="nav-item d-flex align-items-center">
              <i class="bx bx-search fs-4 lh-0"></i>
              <input type="text" class="form-control border-0 shadow-none ps-1 ps-sm-2" id="student_search"
                     placeholder="Search..." aria-label="Search..." />
            </div>
          </div>
          <!-- /Search -->

          <ul class="navbar-nav flex-row align-items-center ms-auto">
            <!-- Place this tag where you want the button to render. -->

            <a class="mode">
                <span class="position-relative moon-sun">
                  <i class="bx bx-moon bx-sm icon moon"></i>
                  <i class="bx bx-sun bx-sm icon sun"></i>
                  <a class="toggle-switch"> <span class="switch"></span></a>
                </span>
            </a>

            <a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown"
               data-bs-auto-close="outside" aria-expanded="false">
                <span class="position-relative">
                  <i class="bx bx-table bx-sm"></i>
                  <span class="badge rounded-pill bg-danger badge-dot badge-notifications border"></span>
                </span>
            </a>

            <a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown"
               data-bs-auto-close="outside" aria-expanded="false">
                <span class="position-relative">
                  <i class="bx bx-bell bx-sm"></i>
                  <span class="badge rounded-pill bg-danger badge-dot badge-notifications border"></span>
                </span>
            </a>

            <ul class="dropdown-menu dropdown-menu-end">
              <li><a class="dropdown-item" href="#">Notification 1</a></li>
              <li><a class="dropdown-item" href="#">Notification 2</a></li>
              <li><a class="dropdown-item" href="#">Notification 3</a></li>
              <li><a class="dropdown-item" href="#">See all notifications</a></li>
            </ul>

            <!-- User -->
            <li class="nav-item navbar-dropdown dropdown-user dropdown">
              <a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown">
                <div class="avatar avatar-online">
                  <img src="../assets/img/avatars/1.png" alt class="w-px-40 h-auto rounded-circle" />
                </div>
              </a>
              <ul class="dropdown-menu dropdown-menu-end">
                <li>
                  <a class="dropdown-item" href="#">
                    <div class="d-flex">
                      <div class="flex-shrink-0 me-3">
                        <div class="avatar avatar-online">
                          <img src="../assets/img/avatars/1.png" alt class="w-px-40 h-auto rounded-circle" />
                        </div>
                      </div>
                      <div class="flex-grow-1">
                        <span class="fw-medium d-block">John Doe</span>
                        <small class="text-muted">Admin</small>
                      </div>
                    </div>
                  </a>
                </li>
                <li>
                  <div class="dropdown-divider"></div>
                </li>
                <li>
                  <a class="dropdown-item" href="#">
                    <i class="bx bx-user me-2"></i>
                    <span class="align-middle">My Profile</span>
                  </a>
                </li>
                <li>
                  <a class="dropdown-item" href="#">
                    <i class="bx bx-cog me-2"></i>
                    <span class="align-middle">Settings</span>
                  </a>
                </li>
                <li>
                  <a class="dropdown-item" href="#">
                      <span class="d-flex align-items-center align-middle">
                        <i class="flex-shrink-0 bx bx-credit-card me-2"></i>
                        <span class="flex-grow-1 align-middle ms-1">Billing</span>
                        <span class="flex-shrink-0 badge badge-center rounded-pill bg-danger w-px-20 h-px-20">4</span>
                      </span>
                  </a>
                </li>
                <li>
                  <div class="dropdown-divider"></div>
                </li>
                <li>
                  <a class="dropdown-item" href="javascript:void(0);">
                    <i class="bx bx-power-off me-2"></i>
                    <span class="align-middle" onclick="location.href='../html/login.html'">Log Out</span>
                  </a>
                </li>
              </ul>
            </li>
            <!--/ User -->
          </ul>
        </div>
      </nav>

      <!-- / Navbar -->

      <!-- Content wrapper -->
      <div class="content-wrapper">
        <div class="container-xxl mt-3">
          <!-- Breadcrumb -->
          <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="#">Academic</a></li>
              <li class="breadcrumb-item active fw-bold" aria-current="page">Student Fee Plan</li>
            </ol>
          </nav>
          <!-- / Breadcrumb -->

          <div class="row gy-1">
            <div class="xxl">
              <div class="card">
                <div class="card-body">
                  <h4 class="card-title fw-bold d-flex mb-0 badge bg-label-info">Academic Setup :</h4>
                  <div class="container mt-2">
                    <div class="row">
                      <div class="col-md-2 border p-3">
                        <!-- Button-style Tabs -->
                        <ul class="nav nav-tabs flex-column" id="feeTab" role="tablist">

                          <button class="btn btn-outline-info active" id="month-tab" data-bs-toggle="tab"
                                  href="#month-name" role="tab">
                            Month
                          </button>

                          <button class="btn btn-outline-info mt-3" id="fee-head-tab" data-bs-toggle="tab"
                                  href="#fee-head" role="tab">
                            Fee Head
                          </button>

                          <button class="btn btn-outline-info mt-3" id="fee-plan-tab" data-bs-toggle="tab"
                                  href="#fee-plan" role="tab">
                            Fee Plan
                          </button>

                          <button class="btn btn-outline-info mt-3" id="bank-tab-btn" data-bs-toggle="tab"
                                  href="#bank-tab-content" role="tab" aria-controls="bank-tab-content"
                                  aria-selected="false">
                            Bank Setup
                          </button>

                        </ul>
                      </div>

                      <!-- Tab Content -->
                      <div class="col-md-10">
                        <div class="tab-content" id="feeTabContent">

                          <!-- Month Tab -->
                          <div class="tab-pane fade show active" id="month-name" role="tabpanel">
                            <h4>Set Month</h4>
                            <form id="monthForm">
                              <div class="mb-3">
                                <label for="monthName" class="form-label">Month</label>
                                <select class="form-select col-sm-3" id="monthName" required>
                                  <option value="">Select a Month</option>
                                  <option value="January">January</option>
                                  <option value="February">February</option>
                                  <option value="March">March</option>
                                  <option value="April">April</option>
                                  <option value="May">May</option>
                                  <option value="June">June</option>
                                  <option value="July">July</option>
                                  <option value="August">August</option>
                                  <option value="September">September</option>
                                  <option value="October">October</option>
                                  <option value="November">November</option>
                                  <option value="December">December</option>
                                </select>
                              </div>
                              <button type="submit" class="btn btn-primary mt-3">Add Month</button>
                            </form>
                            <hr />
                            <h5>Existing Months</h5>
                            <ul id="monthList" class="list-group mt-2 col-sm-6"></ul>
                          </div>

                          <!-- Fee Head Tab -->
                          <div class="tab-pane fade" id="fee-head" role="tabpanel">
                            <h4>Create Fee Head</h4>
                            <form id="feeHeadForm">
                              <div class="mb-3 row">
                                <div class="col-sm-5">
                                  <label for="feeHeadName" class="form-label">Fee Head Name</label>
                                  <input type="text" class="form-control" id="feeHeadName"
                                         placeholder="Enter fee head name" required />
                                </div>
                                <div class="col-sm-4 d-flex align-items-end">
                                  <button type="submit" class="btn btn-primary w-100">Add Fee Head</button>
                                </div>
                              </div>
                            </form>
                            <!-- Result message -->
                            <div id="resultMsg" class="mt-2"></div>
                            <hr />
                            <h5 class="mt-4">Existing Fee Heads</h5>
                            <table class="table table-bordered" id="feeHeadTable">
                              <thead class="table-primary">
                              <tr>
                                <th style="width: 1%">#</th>
                                <th>Fee Head Name</th>
                                <th style="width: 3%">Action</th>
                              </tr>
                              </thead>
                              <tbody></tbody>
                            </table>

                            <!-- Edit Modal -->
                            <div class="modal fade" id="editFeeHeadModal" tabindex="-1">
                              <div class="modal-dialog">
                                <div class="modal-content">
                                  <form id="editFeeHeadForm">
                                    <div class="modal-header">
                                      <h5 class="modal-title">Edit Fee Head</h5>
                                      <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                    </div>
                                    <div class="modal-body">
                                      <input type="hidden" id="editFeeHeadId">
                                      <div class="mb-3">
                                        <label for="editFeeHeadName" class="form-label">Fee Head Name</label>
                                        <input type="text" class="form-control" id="editFeeHeadName" required>
                                      </div>
                                    </div>
                                    <div class="modal-footer">
                                      <button type="submit" class="btn btn-primary">Save Changes</button>
                                    </div>
                                  </form>
                                </div>
                              </div>
                            </div>
                          </div>

                          <!-- Fee Plan Tab -->
                          <div class="tab-pane fade" id="fee-plan" role="tabpanel">
                            <h4>Create Fee Plan for Each Month</h4>
                            <div class="mt-3">
                              <form id="createFeePlanForm">
                                <div class="row justify-content-center align-items-center">
                                  <!-- Fee Head Dropdown -->
                                  <div class="col-md-3 mb-3">
                                    <label for="feeHeadSelect" class="form-label">Fee Head</label>
                                    <select class="form-select" id="feeHeadSelect" required></select>
                                    <!-- Options will be filled dynamically -->
                                  </div>

                                  <!-- Class Dropdown -->
                                  <div class="col-md-2 mb-3">
                                    <label for="classNameSelect" class="form-label">Class</label>
                                    <select id="classNameSelect" class="form-select" name="class" required></select>
                                      <!-- Option values will be populated dynamically with AJAX -->
                                  </div>

                                  <!-- Month Dropdown -->
                                  <div class="col-md-3 mb-3">
                                    <label for="monthDropdown" class="form-label">Month(s)</label>
                                    <div class="form-select position-relative" id="monthDropdown"
                                         style="cursor: pointer;">
                                      Select Month(s)
                                      <div class="dropdown-menu p-2 w-100 shadow" id="dropdownMenu"
                                           style="display: none; position: absolute; top: 100%; left: 0; z-index: 1000;">
                                        <div class="form-check">
                                          <input type="checkbox" id="selectAllCheckbox" class="form-check-input" />
                                          <label class="form-check-label" for="selectAllCheckbox">Select All</label>
                                        </div>
                                        <div id="monthsContainer"></div> <!-- ✅ JS will fill this -->

                                        <!-- ✅ Clear Selection Button -->
                                        <div class="mt-2 text-end">
                                          <button type="button" class="btn btn-sm btn-outline-secondary" id="clearSelectionBtn">
                                            Clear Selection
                                          </button>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                  <!-- end Month Dropdown -->

                                  <!-- Fee Amount -->
                                  <div class="col-md-3 mb-3">
                                    <label for="feeAmount" class="form-label">Fee Amount</label>
                                    <input type="number" class="form-control" id="feeAmount" name="amount"
                                           placeholder="Enter fee amount" required />
                                  </div>
                                </div>

                                <!-- Submit Button -->
                                <button type="submit" class="btn btn-primary mt-3">Create Fee Plan</button>
                              </form>
                              <hr />
                              <h5>Fee Plan List</h5>
                              <div class="table-responsive">
                                <table class="table table-bordered" id="feePlanTable">
                                  <thead>
                                  <tr class="table-secondary">
                                    <th style="width: 1%">Class</th>
                                    <th style="width: 8%">Fee Head</th>
                                    <th style="width: 1%">Month</th>
                                    <th style="width: 1%">Fee Amount</th>
                                    <th style="width: 1%">Created AT</th>
                                    <th style="width: 1%">Updated AT</th>
                                    <th style="width: 8%">Actions</th>
                                  </tr>
                                  </thead>
                                  <tbody id="feePlanBody"></tbody>
                                </table>
                              </div>

                              <!-- Edit Fee Plan Modal -->
                              <div class="modal fade" id="editFeePlanModal" tabindex="-1" data-bs-backdrop="static" aria-hidden="true">
                                <div class="modal-dialog">
                                  <div class="modal-content">
                                    <form id="editFeePlanForm">
                                      <div class="modal-header">
                                        <h5 class="modal-title">Edit Fee Plan</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                      </div>
                                      <div class="modal-body">
                                        <input type="hidden" id="editFeePlanId">

                                        <div class="mb-3">
                                          <label for="editClassSelect" class="form-label">Class</label>
                                          <select id="editClassSelect" class="form-select" required></select>
                                        </div>

                                        <div class="mb-3">
                                          <label for="editFeeHeadSelect" class="form-label">Fee Head</label>
                                          <select id="editFeeHeadSelect" class="form-select" required></select>
                                        </div>

                                        <div class="mb-3">
                                          <label for="editMonth" class="form-label">Month</label>
                                          <input type="text" id="editMonth" class="form-control" readonly required>
                                        </div>

                                        <div class="mb-3">
                                          <label for="editAmount" class="form-label">Amount</label>
                                          <input type="number" id="editAmount" class="form-control" required>
                                        </div>
                                      </div>
                                      <div class="modal-footer">
                                        <button type="submit" class="btn btn-primary">Update</button>
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                      </div>
                                    </form>
                                  </div>
                                </div>
                              </div>

                              <!-- edit Fee plan modal-->

                            </div>
                          </div>

                          <!-- Toast Container -->
                          <div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 1100">
                            <div id="toastMessage" class="toast align-items-center text-white bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
                              <div class="d-flex">
                                <div id="toastBody" class="toast-body">Hello, world!</div>
                                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
                              </div>
                            </div>
                          </div>


                          <!-- Bank Setup Tab -->
                          <div class="tab-pane fade" id="bank-tab-content" role="tabpanel"
                               aria-labelledby="bank-tab-btn">
                            <h4>Create Bank Head Name</h4>

                            <form id="bankDetailsForm">
                              <div class="row mb-3">
                                <div class="col-md-3">
                                  <label for="bankName" class="form-label">Bank Name</label>
                                  <input type="text" class="form-control" id="bankName" name="bankName"
                                         placeholder="Enter bank name" required />
                                </div>
                                <div class="col-md-3">
                                  <label for="branchName" class="form-label">Branch</label>
                                  <input type="text" class="form-control" id="branchName" name="branchName"
                                         placeholder="Enter branch name" required />
                                </div>
                                <div class="col-md-3">
                                  <label for="accountNumber" class="form-label">Account Number</label>
                                  <input type="text" class="form-control" id="accountNumber" name="accountNumber"
                                         placeholder="Enter account number" required />
                                </div>
                                <div class="col-md-3">
                                  <label for="ifscCode" class="form-label">IFSC Code</label>
                                  <input type="text" class="form-control" id="ifscCode" name="ifscCode"
                                         placeholder="Enter IFSC code" required />
                                </div>
                              </div>

                              <div class="row mb-3">
                                <div class="col-md-3">
                                  <label for="accountType" class="form-label">Account Type</label>
                                  <select class="form-select" id="accountType" name="accountType" required>
                                    <option value="">Select account type</option>
                                    <option value="Savings">Savings</option>
                                    <option value="Current">Current</option>
                                    <option value="Other">Other</option>
                                  </select>
                                </div>
                              </div>
                              <div class="d-flex justify-content-end">
                                <button type="submit" class="btn btn-primary">Submit</button>
                              </div>
                            </form>

                            <hr />
                            <h5>Existing Fee Heads</h5>
                            <ul id="bankHeadList" class="list-group mt-2 col-sm-6"></ul>
                            <table class="table table-striped" id="bankTable">
                              <thead class="table-light">
                              <tr class="table-secondary">
                                <th scope="col">#</th>
                                <th scope="col">Bank Name</th>
                                <th scope="col">Branch</th>
                                <th scope="col">Account Number</th>
                                <th scope="col">IFSC Code</th>
                                <th scope="col">Account Type</th>
                                <th scope="col">Actions</th>
                              </tr>
                              </thead>
                              <tbody id="bankTableBody">
                              <!-- Dynamic rows will be added here -->
                              </tbody>
                            </table>
                          </div>

                          <!-- Other Tab -->
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!---Container-->
        </div>
      </div>

      <div class="mb-3"></div>
      <!-- content wrapper -->
      <!-- Footer -->
      <footer class="content-footer footer bg-footer-theme">
        <div class="container-xxl d-flex flex-wrap justify-content-between py-2 flex-md-row flex-column">
          <div class="mb-2 mb-md-0">
            ©
            <script>
              document.write(new Date().getFullYear())
            </script>
            , made with ❤️ by
            <a href="https://optms.co.in" target="_blank" class="footer-link fw-medium">OPTMS Tech</a>
          </div>
          <div class="d-none d-lg-inline-block">
            <a href="https://www.optms.co.in/" target="_blank" class="footer-link me-4">Connect</a>
            <a href="https://www.optms.co.in/issues" target="_blank" class="footer-link">Support</a>
          </div>
        </div>
      </footer>
      <!-- / Footer -->

      <div class="content-backdrop fade"></div>
      <!-- / Layout page -->
    </div>

    <!-- Overlay -->
    <div class="layout-overlay layout-menu-toggle"></div>
  </div>
  <!-- / Layout wrapper -->
</div>

<!-- Core JS -->
<!-- build:js assets/vendor/js/core.js -->

<script src="../assets/vendor/libs/jquery/jquery.js"></script>
<script src="../assets/vendor/libs/popper/popper.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
<script src="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
<script src="../assets/vendor/js/bootstrap.js"></script>
<script src="../custome%20js/fee_head.js"></script>
<script src="../custome js/feePlan.js"></script>
<script src="../assets/vendor/js/menu.js"></script>
<script src="../custome js/bankDetails.js"></script>

<!--Chart js
<script src="../custome%20js/update_fee_plan.js"></script> -->

<!-- endbuild -->

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js"></script>
<!-- endbuild-->

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- Bootstrap JS -->

<!-- DataTables JS -->
<script type="text/javascript" charset="utf8"
        src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" charset="utf8"
        src="https://cdn.datatables.net/1.13.1/js/dataTables.bootstrap5.min.js"></script>

<!-- Vendors JS -->
<script src="../assets/vendor/libs/apex-charts/apexcharts.js"></script>

<!-- Main JS -->
<script src="../assets/js/main.js"></script>

<!-- Page JS -->
<script src="../assets/js/dashboards-analytics.js"></script>

<!-- SweetAlert2 JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.2/dist/sweetalert2.min.js"></script>

<script src="/menu/menuScript.js"></script>
</body>
</html>
