<!DOCTYPE html>

<html lang="en" class="light-style layout-menu-fixed layout-compact" dir="ltr" data-theme="theme-default"
      data-assets-path="../assets/" data-template="Dashboard">

<head>
  <meta charset="utf-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />

  <title>Dashboard - School Management ERP | School ERP - Dashboard</title>

  <meta name="description" content="" />

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="../assets/img/favicon/favicon.ico" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
    rel="stylesheet" />

  <link rel="stylesheet" href="../assets/vendor/fonts/boxicons.css" />

  <!-- Core CSS -->
  <link rel="stylesheet" href="../assets/vendor/css/core.css" class="template-customizer-core-css" />
  <link rel="stylesheet" href="../assets/vendor/css/theme-default.css" class="template-customizer-theme-css" />
  <link rel="stylesheet" href="../assets/css/demo.css" />

  <!-- Vendors CSS -->
  <link rel="stylesheet" href="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css" />
  <link rel="stylesheet" href="../assets/vendor/libs/apex-charts/apex-charts.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />

  <!-- DataTables CSS -->
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.1/css/dataTables.bootstrap5.min.css">

  <!-- Page CSS -->

  <!-- Helpers -->
  <script src="../assets/vendor/js/helpers.js"></script>
  <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
  <!--? Config:  Mandatory theme config file contains global vars & default theme options, Set your preferred theme option in this file.  -->
  <script src="../assets/js/config.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

  <!-- DataTables CSS -->
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.1/css/dataTables.bootstrap5.min.css">

  <!-- SweetAlert2 CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">

</head>

<body>
<!-- Layout wrapper -->
<div class="layout-wrapper layout-content-navbar">
  <div class="layout-container">

    <!-- Menu -->
    <div id="menu"></div>
    <!-- / Menu -->

    <!-- Layout container -->
    <div class="layout-page">

      <!-- Navbar -->
      <nav class="layout-navbar container-xxl navbar navbar-expand-xl navbar-detached align-items-center "
           id="layout-navbar">
        <div class="layout-menu-toggle navbar-nav align-items-xl-center me-3 me-xl-0 d-xl-none">
          <a class="nav-item nav-link px-0 me-xl-4" href="javascript:void(0)">
            <i class="bx bx-menu bx-sm"></i>
          </a>
        </div>

        <div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">
          <!-- Search
          <div class="navbar-nav align-items-center">
            <div class="nav-item d-flex align-items-center">
              <i class="bx bx-search fs-4 lh-0"></i>
              <input type="text" class="form-control border-0 shadow-none ps-1 ps-sm-2" id="student_search"
                placeholder="Search by name or father's name..." onfocus="showCardContainer()"
                onkeyup="searchStudents()" aria-label="Search..." />
            </div>
            <div class="card-container" id="results"></div>
          </div>
          <!- /Search -->

          <ul class="navbar-nav flex-row align-items-center ms-auto">
            <!-- Place this tag where you want the button to render. -->

            <a class="mode">
                <span class="position-relative moon-sun">
                  <i class="bx bx-moon bx-sm icon moon"></i>
                  <i class="bx bx-sun bx-sm icon sun"></i>
                  <a class="toggle-switch">
                    <span class="switch"></span></a>
                </span>
            </a>

            <a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown"
               data-bs-auto-close="outside" aria-expanded="false">
                <span class="position-relative">
                  <i class="bx bx-table bx-sm"></i>
                  <span class="badge rounded-pill bg-danger badge-dot badge-notifications border"></span>
                </span>
            </a>

            <a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown"
               data-bs-auto-close="outside" aria-expanded="false">
                <span class="position-relative">
                  <i class="bx bx-bell bx-sm"></i>
                  <span class="badge rounded-pill bg-danger badge-dot badge-notifications border"></span>
                </span>
            </a>

            <ul class="dropdown-menu dropdown-menu-end">
              <li><a class="dropdown-item" href="#">Notification 1</a></li>
              <li><a class="dropdown-item" href="#">Notification 2</a></li>
              <li><a class="dropdown-item" href="#">Notification 3</a></li>
              <li><a class="dropdown-item" href="#">See all notifications</a></li>
            </ul>

            <!-- User -->
            <li class="nav-item navbar-dropdown dropdown-user dropdown">
              <a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown">
                <div class="avatar avatar-online">
                  <img src="../assets/img/avatars/1.png" alt class="w-px-40 h-auto rounded-circle" />
                </div>
              </a>
              <ul class="dropdown-menu dropdown-menu-end">
                <li>
                  <a class="dropdown-item" href="#">
                    <div class="d-flex">
                      <div class="flex-shrink-0 me-3">
                        <div class="avatar avatar-online">
                          <img src="../assets/img/avatars/1.png" alt class="w-px-40 h-auto rounded-circle" />
                        </div>
                      </div>
                      <div class="flex-grow-1">
                        <span class="fw-medium d-block">John Doe</span>
                        <small class="text-muted">Admin</small>
                      </div>
                    </div>
                  </a>
                </li>
                <li>
                  <div class="dropdown-divider"></div>
                </li>
                <li>
                  <a class="dropdown-item" href="#">
                    <i class="bx bx-user me-2"></i>
                    <span class="align-middle">My Profile</span>
                  </a>
                </li>
                <li>
                  <a class="dropdown-item" href="#">
                    <i class="bx bx-cog me-2"></i>
                    <span class="align-middle">Settings</span>
                  </a>
                </li>
                <li>
                  <a class="dropdown-item" href="#">
                      <span class="d-flex align-items-center align-middle">
                        <i class="flex-shrink-0 bx bx-credit-card me-2"></i>
                        <span class="flex-grow-1 align-middle ms-1">Billing</span>
                        <span class="flex-shrink-0 badge badge-center rounded-pill bg-danger w-px-20 h-px-20">4</span>
                      </span>
                  </a>
                </li>
                <li>
                  <div class="dropdown-divider"></div>
                </li>
                <li>
                  <a class="dropdown-item" href="javascript:void(0);">
                    <i class="bx bx-power-off me-2"></i>
                    <span class="align-middle" onclick="location.href='../html/login.html'">Log Out</span>
                  </a>
                </li>
              </ul>
            </li>
            <!--/ User -->
          </ul>
        </div>
      </nav>

      <!-- / Navbar -->

      <!-- Content wrapper -->
      <div class="content-wrapper">
        <div class="container-xxl mt-3">
          <!-- Breadcrumb -->
          <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
              <li class="breadcrumb-item "><a href="#">Manage Student</a></li>
              <li class="breadcrumb-item active fw-bold" aria-current="page">Student Details</li>
            </ol>
          </nav>
          <!-- / Breadcrumb -->

          <div class="row gy-1">
            <div class="xxl">
              <div class="card">
                <div class="card-body">
                  <h4 class="card-title fw-bold d-flex mb-0 badge bg-label-info">Student Details: - </h4>
                  <div class="d-flex justify-content-between align-items-center">
                    <table id="student_fee_data" class="customs-table">
                      <tbody>
                      <thead>
                      <tr>
                        <th style="width: 12%;"></th>
                        <th></th>
                        <th style="width: 12%;"></th>
                        <th style="width: 25%;"></th>
                        <th style="width: 12%;"></th>
                        <th></th>
                      </tr>
                      </thead>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>

            <div class="xxl">
              <div class="card mt-2">
                <div class="card-body">
                  <div class="d-flex justify-content-between align-items-center">
                    <table id="student_fee_table" class="table table-bordered">
                      <thead>
                      <tr class="text-center">
                        <!-- Dynamically populated months -->
                      </tr>
                      </thead>
                      <tbody>
                      <!-- Dynamically populated fee rows will go here -->
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>

            <!------------Table layout----------------->

            <div class="col-xxl container-p-y">
              <div class="card userCard p-3">
                <div class="d-flex justify-content-between align-items-center">
                  <h5 class="fw-bold ms-3 mb-0">Fee Details</h5>
                  <button class="btn btn-outline-primary" data-bs-toggle="offcanvas" data-bs-target="#addFeeCanvas"
                          aria-controls="addFeeCanvas">
                    <i class="bx bx-plus"></i> Add
                  </button>
                </div>

                <!-- Include Canvas HTML -->
                <div id="canvas-container"></div>

                <div class="row mt-3">
                  <!-- use border width-->
                  <div class="col-md-6">
                    <div class="border-end pe-4">
                      <div class="row ms-1">

                        <!-- Additional Amount Column
                        <div class="col-sm-4 col-md-4">
                          <label for="additionalAmount">Additional Amount</label>
                          <input type="number" id="additionalAmount" name="additionalAmount" class="form-control"
                            placeholder="additional amount">
                        </div> -->

                        <!-- Concession Fee Column -->
                        <div class="col-sm-4 col-md-4">
                          <label for="concessionFee" class="form-label">Concession Fee</label>
                          <input type="number" id="concessionFee" name="concessionFee" class="form-control"
                                 placeholder="concession fee">
                        </div>

                        <!--previous due amount -->
                        <div class="col-sm-4 col-md-4">
                          <label for="received_amount" class="form-label text-info">Last Paid Amount</label>
                          <!-- should change to previousPaidAmount -->
                          <input type="number" id="received_amount" name="previousPaidAmount" class="form-control"
                                 placeholder="previous paid amount" readonly>
                        </div>

                        <!-- Month Dropdown -->
                        <div class="col-md-4">
                          <label for="monthDropdown" class="form-label text-warning">Hostel Month(s)</label>
                          <div class="form-select position-relative" id="monthDropdown"
                               style="cursor: pointer;">
                            Select Month
                            <div class="dropdown-menu p-2 w-100 shadow" id="dropdownMenu"
                                 style="display: none; position: absolute; top: 100%; left: 0; z-index: 1000;">
                              <div class="form-check">
                                <input type="checkbox" id="selectAllCheckbox" class="form-check-input" />
                                <label class="form-check-label" for="selectAllCheckbox">Select All</label>
                              </div>
                              <div class="form-check">
                                <input type="checkbox" value="January" id="january"
                                       class="form-check-input month-checkbox" />
                                <label class="form-check-label" for="january">January</label>
                              </div>
                              <div class="form-check">
                                <input type="checkbox" value="February" id="february"
                                       class="form-check-input month-checkbox" />
                                <label class="form-check-label" for="february">February</label>
                              </div>
                              <!-- Add similar blocks for all months -->
                              <div class="form-check">
                                <input type="checkbox" value="March" id="march"
                                       class="form-check-input month-checkbox" />
                                <label class="form-check-label" for="march">March</label>
                              </div>
                              <div class="form-check">
                                <input type="checkbox" value="April" id="april"
                                       class="form-check-input month-checkbox" />
                                <label class="form-check-label" for="april">April</label>
                              </div>
                              <div class="form-check">
                                <input type="checkbox" value="May" id="may"
                                       class="form-check-input month-checkbox" />
                                <label class="form-check-label" for="may">May</label>
                              </div>
                              <div class="form-check">
                                <input type="checkbox" value="June" id="june"
                                       class="form-check-input month-checkbox" />
                                <label class="form-check-label" for="june">June</label>
                              </div>
                              <div class="form-check">
                                <input type="checkbox" value="July" id="july"
                                       class="form-check-input month-checkbox" />
                                <label class="form-check-label" for="july">July</label>
                              </div>
                              <div class="form-check">
                                <input type="checkbox" value="August" id="august"
                                       class="form-check-input month-checkbox" />
                                <label class="form-check-label" for="august">August</label>
                              </div>
                              <div class="form-check">
                                <input type="checkbox" value="September" id="september"
                                       class="form-check-input month-checkbox" />
                                <label class="form-check-label" for="september">September</label>
                              </div>
                              <div class="form-check">
                                <input type="checkbox" value="October" id="october"
                                       class="form-check-input month-checkbox" />
                                <label class="form-check-label" for="october">October</label>
                              </div>
                              <div class="form-check">
                                <input type="checkbox" value="November" id="november"
                                       class="form-check-input month-checkbox" />
                                <label class="form-check-label" for="november">November</label>
                              </div>
                              <div class="form-check">
                                <input type="checkbox" value="December" id="december"
                                       class="form-check-input month-checkbox" />
                                <label class="form-check-label" for="december">December</label>
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="row border border-info mt-3 p-2 align-items-center shadow-sm" >
                          <!-- Label -->
                          <label class=" col-12 col-sm-6 col-md-6 card-title fw-bold badge pill bg-label-primary mb-0 ms-5"
                                 style="font-size: 1.1rem;"
                                 for="payableAmount">
                            Total Payable Amount:
                          </label>
                          <!-- Input Field -->
                          <div class="col-12 col-sm-5 col-md-4 ms-2">
                            <input type="number" id="payableAmount" name="payableAmount" class="form-control" readonly
                                   placeholder="0">
                          </div>
                        </div>

                        <!-- Fee Details Row -->
                        <div class="row g-3">
                          <!-- Received Amount Column -->
                          <div class="col-12 col-md-4">
                            <label for="receivedFee">Received Fee</label>
                            <input type="number" id="receivedFee" name="receivedFee" class="form-control"
                                   placeholder="0">
                          </div>

                          <!-- Due Fee Column -->
                          <div class="col-12 col-md-4">
                            <label for="dueAmount" class="text-danger">Due Amount</label>
                            <input type="number" id="dueAmount" name="dueAmount" class="form-control" readonly
                                   placeholder="0">
                          </div>

                          <!-- Advanced Fee Column -->
                          <div class="col-12 col-md-4">
                            <label for="advancedAmount">Advanced Fee</label>
                            <input type="number" id="advancedAmount" name="advancedFee" class="form-control" readonly
                                   placeholder="0">
                          </div>
                        </div>
                        <!--
                        <div class="col-md-3">
                          <label for="advancedFee">Remaining Advanced</label>
                          <input type="number" id="remainingAdvance" name="remainingAdvance" class="form-control"
                                 placeholder="Remaining Advance" readonly>
                        </div> -->

                        <div class="row gx-4 gy-3 mt-2">

                          <!-- Payment Status -->
                          <div class="col-12 col-md-4">
                            <label for="paymentStatus" class="form-label">Payment Status</label>
                            <select id="paymentStatus" name="paymentStatus" class="form-select"
                                    onchange="togglePaymentFields()">
                              <option value="pending" selected>Pending</option>
                              <option value="paid">Paid</option>
                            </select>
                          </div>

                          <!-- Payment Type -->
                          <div id="paymentDetails" class="col-12 col-md-4 d-none">
                            <label for="paymentType" class="form-label">Payment Type</label>
                            <select id="paymentType" name="paymentType" class="form-select"
                                    onchange="toggleBankDropdown()">
                              <option value="">Select Payment Type</option>
                              <option value="Cash">Cash</option>
                              <option value="UPI">UPI (GPay, PhonePe, Paytm)</option>
                              <option value="Account">Account</option>
                            </select>
                          </div>

                          <!-- Bank Name Dropdown -->
                          <div id="bankDropdown" class="col-12 col-md-4 d-none">
                            <label for="bankName" class="form-label">Bank Name</label>
                            <select id="bankName" name="bankName" class="form-select">
                              <option value="">loading...</option>
                            </select>
                          </div>

                          <div class="col-md-4">
                            <label for="dateSelection" class="form-label">Select Date</label>
                            <input type="date" id="dateSelection" name="dateSelection" class="form-control">
                          </div>
                        </div>

                        <!-- Remark Section -->
                        <div class="col-11 mt-3">
                          <label for="remark">Remark</label>
                          <textarea id="remark" name="remark" class="form-control" rows="3"
                                    placeholder="Enter your remark here..."></textarea>
                        </div>

                        <div class="row mt-5 mb-4">
                          <!-- Submit Button -->
                          <div class="col-md-4">
                            <button type="button" class="btn btn-primary w-100" id="submitFeeDetails">Submit</button>
                          </div>
                          <!--Cancel Button-->
                          <div class="col-md-4">
                            <button type="reset" class="btn btn-secondary w-100">Cancel</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="col-md-6">
                    <div class="card">
                      <div class="card-header bg-secondary text-white">
                        Fee Collection
                      </div>
                      <div class="card-body p-2">
                        <!-- Table Section -->

                        <table id="FeeCollection"
                               class="table table-sm table-bordered text-center mb-0 table-hover align-middle"
                               style="table-layout: auto; min-width: 100px">
                          <thead>
                          <tr class="table-secondary">
                            <th class="fw-bold">Month</th>
                            <th class="fw-bold">Fee Head</th>
                            <th class="fw-bold">Amount</th>
                            <th class="fw-bold">Concession</th>
                            <th class="fw-bold">NetPay</th>
                            <th class="fw-bold">Status</th>
                            <th class="fw-bold">Due</th>
                            <th id="actionHeader" class="fw-bold text-center" style="width: 1%; white-space: nowrap;">
                              Action
                            </th>
                          </tr>
                          </thead>
                          <tbody>
                          <tr>
                            <!-- Rows dynamically generated via JS -->
                          </tr>
                          </tbody>
                          <tfoot class="table-info">
                          <tr id="grandTotalRow" class="fw-bold bg-light">
                            <td colspan="2" class="text-end">Grand Total:</td>
                            <td id="grandTotalAmount">0</td>
                            <td id="grandTotalConcession">0</td>
                            <td id="grandTotalNetPay">0</td>
                            <td colspan="1"></td>
                            <td id="grandTotalDue">0</td>
                            <td id="grandTotalActionCell"></td>
                          </tr>
                          </tfoot>

                        </table>
                      </div>
                    </div>
                    <div class="card-footer text-center">
                      <small>Manage your fees effectively.</small>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!---Container-->
        </div>
      </div>


      <div class="mb-3">

      </div>
      <!-- content wrapper -->
      <!-- Footer -->
      <footer class="content-footer footer bg-footer-theme">
        <div class="container-xxl d-flex flex-wrap justify-content-between py-2 flex-md-row flex-column">
          <div class="mb-2 mb-md-0">
            ©
            <script>
              document.write(new Date().getFullYear())
            </script>
            , made with ❤️ by
            <a href="https://optms.co.in" target="_blank" class="footer-link fw-medium">OPTMS Tech</a>
          </div>
          <div class="d-none d-lg-inline-block">
            <a href="https://www.optms.co.in/" target="_blank" class="footer-link me-4">Connect</a>
            <a href="https://www.optms.co.in/issues" target="_blank" class="footer-link">Support</a>
          </div>
        </div>
      </footer>
      <!-- / Footer -->

      <div class="content-backdrop fade"></div>
      <!-- / Layout page -->
    </div>

    <!-- Overlay -->
    <div class="layout-overlay layout-menu-toggle"></div>
  </div>
</div>
<!-- / Layout wrapper -->

<!-- Core JS -->
<!-- build:js assets/vendor/js/core.js -->

<script src="../assets/vendor/libs/jquery/jquery.js"></script>
<script src="../assets/vendor/libs/popper/popper.js"></script>
<script src="../assets/vendor/js/bootstrap.js"></script>
<script src="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
<script src="../assets/vendor/js/menu.js"></script>
<script src="../custome js/collect_fee.js"></script>
<script src="../custome js/collection_page.js"></script>
<script src="../custome js/submitFee/submit_fee.js"></script>

<!--- Collection Page Fee Head--->
<script src="../custome js/collection_page_fee_head.js"></script>
<!-- Add Fee Canvas -->
<script src="../custome js/add_fee_canva.js"></script>

<!-- endbuild -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js"></script>
<!-- endbuild-->

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- DataTables JS -->
<script type="text/javascript" charset="utf8"
        src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>

<script type="text/javascript" charset="utf8"
        src="https://cdn.datatables.net/1.13.1/js/dataTables.bootstrap5.min.js"></script>

<!-- Vendors JS -->
<script src="../assets/vendor/libs/apex-charts/apexcharts.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<!-- Main JS -->
<script src="../assets/js/main.js"></script>

<!-- Page JS -->
<script src="../assets/js/dashboards-analytics.js"></script>
<!-- Menu load script -->
<script src="/menu/menuScript.js"></script>


</body>
</html>
